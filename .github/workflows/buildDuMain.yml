name: Mon action à chaque push
on:
  push:
    branches:
      - main

jobs:
  build:
    name: Build du fichier main.pdf
    runs-on: ubuntu-latest

    steps:
      - name: checkout repo
        uses: actions/checkout@v2.3.4

      - name: Mettre à jour les sources des paquets
        run: sudo apt-get update

      - name: Installer pdflatex, biber et all langages to get french
        run: |
          sudo apt-get install -y texlive-latex-base
          sudo apt-get install -y texlive-fonts-recommended
          sudo apt-get install -y texlive-fonts-extra
          sudo apt-get install -y texlive-latex-extra
          sudo apt-get -y install biber
          sudo apt-get install -y texlive-lang-all

      - name: Compiler le document LaTeX
        run: |
          pdflatex paper/main.tex 
          biber main.bcf
          pdflatex paper/main.tex 

      - name: Sauvegarder le fichier main.pdf
        uses: actions/upload-artifact@v2
        with:
          name: main.pdf
          path: ./
