name: Mon action à chaque push
on:
  push:
    branches:
      - main

jobs:
  build:
    name: Build du fichier main.pdf
    runs-on: ubuntu-latest

    steps:
      - name: trouver le path
        run: sudo env

      - name: Mettre à jour les sources des paquets
        run: sudo apt-get update

      - name: Installer pdflatex
        run: |
          sudo apt-get install -y texlive-latex-base

      - name: Installer pdflatex2
        run: |
          sudo apt-get install -y texlive-fonts-recommended

      - name: Installer pdflatex3
        run: |
          sudo apt-get install -y texlive-fonts-extra

      - name: Installer pdflatex4
        run: |
          sudo apt-get install -y texlive-latex-extra

      - name: Installer biber
        run: sudo apt-get -y install biber
      - name: Installer all langages to get french
        run: sudo apt-get install -y texlive-lang-all
      - name: Compiler le document LaTeX
        run: |
          pdflatex ./paper/main.tex
          biber ./main.bbl
          pdflatex ./paper/main.tex

      - name: Sauvegarder le fichier main.pdf
        uses: actions/upload-artifact@v2
        with:
          name: sortie
          path: paper/main.pdf
